---
dependencies:
  - role: adduser
    user: "{{ addusers.etcd }}"
    when: ansible_os_family != 'CoreOS'
    
  - role: container_engine
    when: (ansible_os_family != "CoreOS" and etcd_deployment_type == "container" or inventory_hostname in groups['k8s-cluster'])

  - role: download
    file: "{{ downloads.etcd }}"
    
  - role: container_engine
    when: (ansible_os_family != "CoreOS" and etcd_deployment_type == "container")
